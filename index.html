<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Academia Management System</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/a076d15392.js" crossorigin="anonymous"></script>
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <i class="fas fa-graduation-cap"></i>
                <span>Academia</span>
            </div>
            <nav>
                <a href="#" class="nav-link active" data-target="dashboard">
                    <i class="fas fa-th-large"></i> Dashboard
                </a>
                <a href="#" class="nav-link" data-target="inscripcion">
                    <i class="fas fa-user-plus"></i> Inscripción
                </a>
                <a href="#" class="nav-link" data-target="pagos">
                    <i class="fas fa-money-bill-wave"></i> Pagos
                </a>
                <a href="#" class="nav-link" data-target="bodega">
                    <i class="fas fa-warehouse"></i> Bodega
                </a>
                 <a href="#" class="nav-link" data-target="paquetes">
                    <i class="fas fa-boxes"></i> Paquetes
                </a>
                <a href="#" class="nav-link" data-target="talleres">
                    <i class="fas fa-chalkboard-teacher"></i> Talleres
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="top-bar">
                <h1 id="page-title">Dashboard Academia</h1>
                <div class="user-info">
                    <span>Administrador</span>
                    <img src="https://ui-avatars.com/api/?name=Admin&background=random" alt="User">
                </div>
            </header>

            <!-- Sections -->
            <section id="dashboard" class="content-section active">
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Alumnas Inscritas</h3>
                        <p class="stat-number" id="stat-students">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>Pagos Pendientes</h3>
                        <p class="stat-number" id="stat-pending">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>Alertas Bodega</h3>
                        <p class="stat-number" id="stat-alerts">0</p>
                    </div>
                </div>
            </section>

            <!-- Inscripcion Section -->
            <section id="inscripcion" class="content-section">
                <div class="card">
                    <h2>Nueva Inscripción</h2>
                    <form id="registration-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="names">Nombres</label>
                                <input type="text" id="names" name="names" required>
                            </div>
                            <div class="form-group">
                                <label for="lastnames">Apellidos</label>
                                <input type="text" id="lastnames" name="lastnames" required>
                            </div>
                            <div class="form-group">
                                <label for="age">Edad</label>
                                <input type="number" id="age" name="age" required>
                            </div>
                            <div class="form-group">
                                <label for="cui">CUI</label>
                                <input type="text" id="cui" name="cui" required>
                            </div>
                            <div class="form-group">
                                <label for="phone">Celular</label>
                                <input type="text" id="phone" name="phone" required>
                            </div>
                            <div class="form-group">
                                <label for="plan">Plan</label>
                                <select id="plan" name="plan" required>
                                    <option value="diario">Diario</option>
                                    <option value="fin_de_semana">Fin de semana</option>
                                    <option value="ejecutivo">Ejecutivo</option>
                                </select>
                            </div>
                        </div>

                        <div id="guardian-fields" style="display: none;">
                            <hr>
                            <h3>Datos del Encargado</h3>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="guardian1_name">Encargado Legal 1</label>
                                    <input type="text" id="guardian1_name" name="guardian1_name">
                                </div>
                                <div class="form-group">
                                    <label for="guardian1_phone">Celular Encargado 1</label>
                                    <input type="text" id="guardian1_phone" name="guardian1_phone">
                                </div>
                                <div class="form-group">
                                    <label for="guardian2_name">Encargado 2 (Opcional)</label>
                                    <input type="text" id="guardian2_name" name="guardian2_name">
                                </div>
                                <div class="form-group">
                                    <label for="guardian2_phone">Celular Encargado 2</label>
                                    <input type="text" id="guardian2_phone" name="guardian2_phone">
                                </div>
                            </div>
                        </div>

                        <div class="photo-section">
                            <button type="button" id="take-photo" class="btn-secondary">Tomar Foto</button>
                            <canvas id="photo-canvas" style="display: none;"></canvas>
                            <img id="photo-preview" src="" alt="Vista previa" style="display: none;">
                        </div>

                        <div id="reg-payment-grid-container" style="margin-top: 20px; border-top: 1px solid #e2e8f0; padding-top: 20px;">
                            <h3>Pagos Iniciales (Opcional)</h3>
                            <div id="reg-payment-grid"></div>
                        </div>

                        <button type="submit" class="btn-primary" style="margin-top: 20px;">Inscribir Alumna</button>
                    </form>
                </div>
            </section>

            <!-- Pagos Section -->
            <section id="pagos" class="content-section">
                <div class="card">
                    <div class="filter-bar">
                        <label for="filter-plan">Filtrar por Plan:</label>
                        <select id="filter-plan">
                            <option value="todos">Todos</option>
                            <option value="diario">Diario</option>
                            <option value="fin_de_semana">Fin de semana</option>
                            <option value="ejecutivo">Ejecutivo</option>
                        </select>
                    </div>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Información Alumna</th>
                                <th>Gestión de Pagos (Meses y Extras)</th>
                            </tr>
                        </thead>
                        <tbody id="payments-table-body">
                            <!-- JS will populate this -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Bodega Section -->
            <section id="bodega" class="content-section">
                <div class="card">
                    <!-- En la sección de Bodega -->
                    <h3>Alertas de Producto:</h3>
                    <div id="inventory-alerts-container" class="alerts-list">
                        <!-- El JS solo llenará lo que vaya aquí adentro -->
                    </div>
                    <hr style="margin: 2rem 0;">
                    <form id="product-form">
                        <input type="hidden" id="prod-id">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="prod-code">Código</label>
                                <input type="text" id="prod-code" required>
                            </div>
                            <div class="form-group">
                                <label for="prod-desc">Nombre Producto</label>
                                <input type="text" id="prod-desc" required>
                            </div>
                            <div class="form-group">
                                <label for="prod-cost">Costo</label>
                                <input type="number" id="prod-cost" step="0.01" required>
                            </div>
                            <div class="form-group">
                                <label for="prod-units">Unidades</label>
                                <input type="number" id="prod-units" required>
                            </div>
                        </div>
                        <div style="margin-top: 10px; display: flex; gap: 10px;">
                            <button type="submit" class="btn-primary" id="btn-save-prod">Guardar Producto</button>
                            <button type="button" class="btn-secondary" id="btn-cancel-prod" style="display: none;">Cancelar Edición</button>
                        </div>
                    </form>
                    <hr style="margin: 2rem 0;">
                    <h3>Buscar productos</h3>
                    <div class="barcode-input">
                        <input type="text" id="barcode-scan" placeholder="Escanear o ingresar código...">
                        <button id="search-product" class="btn-primary">Buscar</button>
                        <button id="reset-search" class="btn-secondary">Reiniciar</button>
                    </div>
                    <hr style="margin: 2rem 0;">
                    
                    <h3>Productos Existentes</h3>
                    <div id="main-products-list" class="grid-list" style="margin-top: 20px;">
                        <!-- Global list of products -->
                    </div>
                    <hr style="margin: 2rem 0;">
                </div>
            </section>
            <!-- Paquetes Section -->
            <section id="paquetes" class="content-section">
                <div class="card">
                    <div class="package-management-in-bodega">
                        <h2>Crear Paquete de Productos</h2>
                        <form id="main-package-form">
                            <input type="hidden" id="main-package-id">
                            <div class="form-group">
                                <label>Nombre del Paquete:</label>
                                <input type="text" id="main-pkg-name" required>
                            </div>
                            <div class="form-group">
                                <label>Descripción/Detalles:</label>
                                <textarea id="main-pkg-desc" rows="2"></textarea>
                            </div>
                            
                            <div style="margin-top: 15px; border-top: 1px solid #e2e8f0; padding-top: 10px;">
                                <label><strong>Contenido del Pack (Productos de Bodega):</strong></label>
                                <div style="display: flex; gap: 5px; margin-top: 5px;">
                                    <input type="text" id="main-pkg-prod-code" placeholder="Código de producto...">
                                    <button type="button" id="btn-main-search-prod" class="btn-secondary">Buscar</button>
                                </div>
                                <div id="main-pkg-prod-item-form" style="display: none; margin-top: 10px; background: #f8fafc; padding: 10px; border-radius: 5px; border: 1px dashed #cbd5e1;">
                                    <p id="main-pkg-prod-item-desc" style="font-size: 13px; font-weight: bold;"></p>
                                    <div style="display: flex; gap: 5px; align-items: center; margin-top: 5px;">
                                        <input type="number" id="main-pkg-prod-item-qty" value="1" style="width: 80px;">
                                        <button type="button" id="btn-main-add-prod" class="btn-primary" style="padding: 5px 15px;">Añadir</button>
                                    </div>
                                </div>
                                <div id="main-pkg-prods-list" style="margin-top: 10px; display: grid; gap: 5px;">
                                    <!-- List of products in draft -->
                                </div>
                            </div>

                            <div style="margin-top: 20px;">
                                <button type="submit" class="btn-primary">Guardar Paquete</button>
                                <button type="button" id="btn-main-cancel-pkg" class="btn-secondary" style="display: none;">Cancelar</button>
                            </div>
                        </form>
                        <hr style="margin: 2rem 0;">
                        <h3>Paquetes Existentes</h3>
                        <div id="main-packages-list" class="grid-list" style="margin-top: 20px;">
                            <!-- Global list of packages -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Talleres Section -->
            <section id="talleres" class="content-section">
                <div class="card">
                    <h2>Gestión de Talleres</h2>
                    <form id="workshop-form">
                        <div class="form-group">
                            <label for="ws-name">Nombre del Taller</label>
                            <input type="text" id="ws-name" required>
                        </div>
                        <div class="form-group">
                            <label for="ws-desc">Descripción</label>
                            <textarea id="ws-desc" rows="3"></textarea>
                        </div>
                        <button type="submit" class="btn-primary">Crear Taller</button>
                    </form>
                    <hr style="margin: 2rem 0;">
                    <div id="workshop-list">
                        <!-- Workshops here -->
                    </div>
                </div>
            </section>

            </section>
        </main>
    </div>

    <!-- Workshop Modal -->
    <div id="workshop-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h2 id="modal-ws-name">Detalle del Taller</h2>
            <p id="modal-ws-desc"></p>
            <hr style="margin: 2rem 0;">
            <div class="modal-grid">
                <!-- Seccion Alumnas -->
                <div class="modal-section">
                    <h3>Alumnas Inscritas</h3>
                    <div class="form-group">
                        <label>Agregar Alumna:</label>
                        <select id="modal-add-student-select">
                            <!-- JS dynamic -->
                        </select>
                        <button id="btn-add-student-to-ws" class="btn-primary">Inscribir</button>
                    </div>
                    <div id="modal-ws-students-list"></div>
                </div>

                <!-- Seccion Paquetes -->
                <div class="modal-section">
                    <h3>Paquetes Ofrecidos en este Taller</h3>
                    <div class="form-group" style="margin-bottom: 1rem;">
                        <label>Vincular Paquete Global:</label>
                        <div style="display: flex; gap: 5px;">
                            <select id="modal-link-package-select" style="flex: 1;">
                                <!-- JS dynamic -->
                            </select>
                            <button id="btn-link-package-to-ws" class="btn-primary">Vincular</button>
                        </div>
                    </div>
                    
                    <div id="modal-ws-packages-list">
                        <!-- List of associated packages -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
</body>
</html>
